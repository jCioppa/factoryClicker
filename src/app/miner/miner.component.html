<div class = "miner-container">   
  
    <div class = 'miner-container-top'> 

        <div class = "miner-recipe-select">
            <select (change) = "onRecipeSelectionChanged($event)" [(ngModel)] = "currentSelection">
                <option *ngFor = "let o of dropdownOptions" [value] = "o.value">{{o.displayName}}</option>
            </select>
        </div>

        <div class="active-indicator">
            <div *ngIf="!miner.recipe" class = 'red indicator'></div>
            <div *ngIf="miner.recipe && !miner.running" class = 'yellow indicator'></div>
            <div *ngIf="miner.recipe && miner.running" class = 'green indicator'></div>
        </div>

    </div>

    <div class = 'miner-container-bottom' *ngIf = "miner && miner.recipe">
 
        <div class = "miner-coal-input">
            <button  (click) = "transferCoal()">{{miner.coalBuffer.count}}</button>
        </div>
        
        <div class = "miner-progress">
            <mat-progress-bar class = 'miner-progress-bar' mode="determinate" [value]="miner.normalizedProgress"></mat-progress-bar>
        </div>
        
        <div class = 'miner-resource-output'>
            <button class = 'transfer-button' (click) = "transferOutput()">{{miner.outputBuffer.count}}</button>
        </div>

    </div>
    <div class = 'miner-power-progress'>
        <mat-progress-bar class = 'miner-power-progress-bar' mode="determinate" [value]="miner.normalizedPower"></mat-progress-bar>
    </div>

    <div  class = "debug" *ngIf = "displayDebug && miner && miner.recipe && miner.state">
        <div>running: {{miner.running}}</div>
        <div>progress: {{miner.progress}} / {{miner.recipe.duration}} [{{miner.normalizedProgress}}]</div>
        <div>power: {{miner.power}} / {{miner.maxPower}} [{{miner.normalizedPower}}]</div>
        <div>state: {{miner.state.currentState}} </div>
    </div>
</div>
